<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2196F3">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        body[dir="ltr"] {
            font-family: 'Roboto', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header-buttons {
            position: absolute;
            top: 30px;
            display: flex;
            gap: 10px;
        }

        [dir="rtl"] .header-buttons {
            left: 30px;
        }

        [dir="ltr"] .header-buttons {
            right: 30px;
        }

        .lang-toggle {
            background: rgba(255,255,255,0.2);
            border: 2px solid white;
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }

        .lang-toggle:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }

        .save-btn-header {
            background: rgba(76, 175, 80, 0.9);
            border: 2px solid white;
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
        }

        .save-btn-header:hover {
            background: rgba(76, 175, 80, 1);
            transform: translateY(-2px);
        }

        .form-section {
            padding: 30px;
            background: #f5f5f5;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        label {
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
        }

        input, select {
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #2196F3;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        button {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }

        .add-btn {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
        }

        .add-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
        }

        .clear-btn {
            background: linear-gradient(135deg, #f44336 0%, #da190b 100%);
            color: white;
        }

        .clear-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(244, 67, 54, 0.4);
        }

        .inventory-section {
            padding: 30px;
        }

        .search-box {
            margin-bottom: 20px;
        }

        .search-box input {
            width: 100%;
            padding: 15px;
            font-size: 16px;
            border: 2px solid #ddd;
            border-radius: 8px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }

        thead {
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            color: white;
        }

        th, td {
            padding: 15px;
            text-align: center;
        }

        tbody tr {
            border-bottom: 1px solid #eee;
            transition: background 0.3s;
        }

        tbody tr:hover {
            background: #f5f5f5;
        }

        .actions {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .edit-btn, .delete-btn {
            padding: 8px 16px;
            border-radius: 5px;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
        }

        .edit-btn {
            background: #FF9800;
            color: white;
        }

        .edit-btn:hover {
            background: #F57C00;
            transform: scale(1.05);
        }

        .delete-btn {
            background: #f44336;
            color: white;
        }

        .delete-btn:hover {
            background: #da190b;
            transform: scale(1.05);
        }

        .toast {
            position: fixed;
            bottom: 30px;
            background: #323232;
            color: white;
            padding: 16px 24px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            z-index: 1000;
            animation: slideIn 0.3s ease-out;
        }

        [dir="rtl"] .toast {
            right: 30px;
        }

        [dir="ltr"] .toast {
            left: 30px;
        }

        @keyframes slideIn {
            from {
                transform: translateY(100px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }

        .empty-state svg {
            width: 120px;
            height: 120px;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.8em;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .header-buttons {
                position: static;
                justify-content: center;
                margin-top: 15px;
            }

            table {
                font-size: 14px;
            }

            th, td {
                padding: 10px 5px;
            }

            .actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-buttons">
                <button class="lang-toggle" onclick="toggleLanguage()">
                    <span>ğŸŒ</span>
                    <span id="lang-text">English</span>
                </button>
                <button class="save-btn-header" onclick="saveData()" id="save-btn-header">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
            </div>
            <h1 id="main-title">Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</h1>
        </header>

        <div class="form-section">
            <form id="inventoryForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="itemName" id="label-item-name">Ø§Ø³Ù… Ø§Ù„ØµÙ†Ù</label>
                        <input type="text" id="itemName" required>
                    </div>
                    <div class="form-group">
                        <label for="quantity" id="label-quantity">Ø§Ù„ÙƒÙ…ÙŠØ©</label>
                        <input type="number" id="quantity" required min="0">
                    </div>
                    <div class="form-group">
                        <label for="unit" id="label-unit">Ø§Ù„ÙˆØ­Ø¯Ø©</label>
                        <select id="unit" required>
                            <option value="Ù‚Ø·Ø¹Ø©">Ù‚Ø·Ø¹Ø©</option>
                            <option value="ÙƒØ±ØªÙˆÙ†">ÙƒØ±ØªÙˆÙ†</option>
                            <option value="ÙƒÙŠØ³">ÙƒÙŠØ³</option>
                            <option value="Ø¹Ù„Ø¨Ø©">Ø¹Ù„Ø¨Ø©</option>
                            <option value="ØµÙ†Ø¯ÙˆÙ‚">ØµÙ†Ø¯ÙˆÙ‚</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="price" id="label-price">Ø§Ù„Ø³Ø¹Ø± (Ø¬Ù†ÙŠÙ‡)</label>
                        <input type="number" id="price" required min="0" step="0.01">
                    </div>
                    <div class="form-group">
                        <label for="location" id="label-location">Ø§Ù„Ù…ÙˆÙ‚Ø¹</label>
                        <input type="text" id="location" required>
                    </div>
                    <div class="form-group">
                        <label for="category" id="label-category">Ø§Ù„ÙØ¦Ø©</label>
                        <select id="category" required>
                            <option value="Ù…ÙˆØ§Ø¯ ØºØ°Ø§Ø¦ÙŠØ©">Ù…ÙˆØ§Ø¯ ØºØ°Ø§Ø¦ÙŠØ©</option>
                            <option value="Ù…ÙˆØ§Ø¯ ØªÙ†Ø¸ÙŠÙ">Ù…ÙˆØ§Ø¯ ØªÙ†Ø¸ÙŠÙ</option>
                            <option value="Ø£Ø¯ÙˆØ§Øª Ù…ÙƒØªØ¨ÙŠØ©">Ø£Ø¯ÙˆØ§Øª Ù…ÙƒØªØ¨ÙŠØ©</option>
                            <option value="Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª">Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª</option>
                            <option value="Ø£Ø®Ø±Ù‰">Ø£Ø®Ø±Ù‰</option>
                        </select>
                    </div>
                </div>
                <div class="btn-group">
                    <button type="submit" class="add-btn" id="submit-btn">â• Ø¥Ø¶Ø§ÙØ© ØµÙ†Ù</button>
                    <button type="button" class="clear-btn" onclick="clearForm()" id="clear-btn">ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬</button>
                </div>
            </form>
        </div>

        <div class="inventory-section">
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† ØµÙ†Ù..." onkeyup="filterInventory()">
            </div>
            <div style="overflow-x: auto;">
                <table id="inventoryTable">
                    <thead>
                        <tr>
                            <th id="th-item-name">Ø§Ø³Ù… Ø§Ù„ØµÙ†Ù</th>
                            <th id="th-quantity">Ø§Ù„ÙƒÙ…ÙŠØ©</th>
                            <th id="th-unit">Ø§Ù„ÙˆØ­Ø¯Ø©</th>
                            <th id="th-price">Ø§Ù„Ø³Ø¹Ø±</th>
                            <th id="th-total">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>
                            <th id="th-location">Ø§Ù„Ù…ÙˆÙ‚Ø¹</th>
                            <th id="th-category">Ø§Ù„ÙØ¦Ø©</th>
                            <th id="th-date">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                            <th id="th-actions">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                        </tr>
                    </thead>
                    <tbody id="inventoryBody">
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // Translation object
        const translations = {
            ar: {
                // Header
                mainTitle: 'Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†',
                langToggle: 'English',
                saveBtnHeader: 'ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª',
                
                // Form labels
                labelItemName: 'Ø§Ø³Ù… Ø§Ù„ØµÙ†Ù',
                labelQuantity: 'Ø§Ù„ÙƒÙ…ÙŠØ©',
                labelUnit: 'Ø§Ù„ÙˆØ­Ø¯Ø©',
                labelPrice: 'Ø§Ù„Ø³Ø¹Ø± (Ø¬Ù†ÙŠÙ‡)',
                labelLocation: 'Ø§Ù„Ù…ÙˆÙ‚Ø¹',
                labelCategory: 'Ø§Ù„ÙØ¦Ø©',
                
                // Units
                unitPiece: 'Ù‚Ø·Ø¹Ø©',
                unitCarton: 'ÙƒØ±ØªÙˆÙ†',
                unitBag: 'ÙƒÙŠØ³',
                unitBox: 'Ø¹Ù„Ø¨Ø©',
                unitCrate: 'ØµÙ†Ø¯ÙˆÙ‚',
                
                // Categories
                categoryFood: 'Ù…ÙˆØ§Ø¯ ØºØ°Ø§Ø¦ÙŠØ©',
                categoryCleaning: 'Ù…ÙˆØ§Ø¯ ØªÙ†Ø¸ÙŠÙ',
                categoryOffice: 'Ø£Ø¯ÙˆØ§Øª Ù…ÙƒØªØ¨ÙŠØ©',
                categoryElectronics: 'Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª',
                categoryOther: 'Ø£Ø®Ø±Ù‰',
                
                // Buttons
                submitBtnAdd: 'â• Ø¥Ø¶Ø§ÙØ© ØµÙ†Ù',
                submitBtnUpdate: 'âœï¸ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙ†Ù',
                clearBtn: 'ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬',
                editBtn: 'ØªØ¹Ø¯ÙŠÙ„',
                deleteBtn: 'Ø­Ø°Ù',
                
                // Table headers
                thItemName: 'Ø§Ø³Ù… Ø§Ù„ØµÙ†Ù',
                thQuantity: 'Ø§Ù„ÙƒÙ…ÙŠØ©',
                thUnit: 'Ø§Ù„ÙˆØ­Ø¯Ø©',
                thPrice: 'Ø§Ù„Ø³Ø¹Ø±',
                thTotal: 'Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ',
                thLocation: 'Ø§Ù„Ù…ÙˆÙ‚Ø¹',
                thCategory: 'Ø§Ù„ÙØ¦Ø©',
                thDate: 'Ø§Ù„ØªØ§Ø±ÙŠØ®',
                thActions: 'Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª',
                
                // Placeholders
                searchPlaceholder: 'ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† ØµÙ†Ù...',
                
                // Messages
                confirmDelete: 'Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„ØµÙ†ÙØŸ',
                itemAdded: 'ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙ†Ù Ø¨Ù†Ø¬Ø§Ø­!',
                itemUpdated: 'ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙ†Ù Ø¨Ù†Ø¬Ø§Ø­!',
                itemDeleted: 'ØªÙ… Ø­Ø°Ù Ø§Ù„ØµÙ†Ù Ø¨Ù†Ø¬Ø§Ø­!',
                dataSaved: 'ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!',
                
                // Currency
                currency: 'Ø¬.Ù…'
            },
            en: {
                // Header
                mainTitle: 'Inventory Management System',
                langToggle: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©',
                saveBtnHeader: 'ğŸ’¾ Save Data',
                
                // Form labels
                labelItemName: 'Item Name',
                labelQuantity: 'Quantity',
                labelUnit: 'Unit',
                labelPrice: 'Price (EGP)',
                labelLocation: 'Location',
                labelCategory: 'Category',
                
                // Units
                unitPiece: 'Piece',
                unitCarton: 'Carton',
                unitBag: 'Bag',
                unitBox: 'Box',
                unitCrate: 'Crate',
                
                // Categories
                categoryFood: 'Food Items',
                categoryCleaning: 'Cleaning Supplies',
                categoryOffice: 'Office Supplies',
                categoryElectronics: 'Electronics',
                categoryOther: 'Other',
                
                // Buttons
                submitBtnAdd: 'â• Add Item',
                submitBtnUpdate: 'âœï¸ Update Item',
                clearBtn: 'ğŸ—‘ï¸ Clear Form',
                editBtn: 'Edit',
                deleteBtn: 'Delete',
                
                // Table headers
                thItemName: 'Item Name',
                thQuantity: 'Quantity',
                thUnit: 'Unit',
                thPrice: 'Price',
                thTotal: 'Total',
                thLocation: 'Location',
                thCategory: 'Category',
                thDate: 'Date',
                thActions: 'Actions',
                
                // Placeholders
                searchPlaceholder: 'ğŸ” Search for an item...',
                
                // Messages
                confirmDelete: 'Are you sure you want to delete this item?',
                itemAdded: 'Item added successfully!',
                itemUpdated: 'Item updated successfully!',
                itemDeleted: 'Item deleted successfully!',
                dataSaved: 'Data saved successfully!',
                
                // Currency
                currency: 'EGP'
            }
        };

        let currentLanguage = localStorage.getItem('app_language') || 'ar';
        let inventory = JSON.parse(localStorage.getItem('inventory')) || [];
        let editingIndex = -1;

        // Language functions
        function setLanguage(lang) {
            currentLanguage = lang;
            localStorage.setItem('app_language', lang);
            
            const t = translations[lang];
            const isRTL = lang === 'ar';
            
            // Update HTML attributes
            document.documentElement.lang = lang;
            document.documentElement.dir = isRTL ? 'rtl' : 'ltr';
            
            // Update document title
            document.title = t.mainTitle;
            
            // Update header
            document.getElementById('main-title').textContent = t.mainTitle;
            document.getElementById('lang-text').textContent = t.langToggle;
            document.getElementById('save-btn-header').innerHTML = t.saveBtnHeader;
            
            // Update form labels
            document.getElementById('label-item-name').textContent = t.labelItemName;
            document.getElementById('label-quantity').textContent = t.labelQuantity;
            document.getElementById('label-unit').textContent = t.labelUnit;
            document.getElementById('label-price').textContent = t.labelPrice;
            document.getElementById('label-location').textContent = t.labelLocation;
            document.getElementById('label-category').textContent = t.labelCategory;
            
            // Update unit options
            const unitSelect = document.getElementById('unit');
            unitSelect.options[0].text = t.unitPiece;
            unitSelect.options[1].text = t.unitCarton;
            unitSelect.options[2].text = t.unitBag;
            unitSelect.options[3].text = t.unitBox;
            unitSelect.options[4].text = t.unitCrate;
            
            // Update category options
            const categorySelect = document.getElementById('category');
            categorySelect.options[0].text = t.categoryFood;
            categorySelect.options[1].text = t.categoryCleaning;
            categorySelect.options[2].text = t.categoryOffice;
            categorySelect.options[3].text = t.categoryElectronics;
            categorySelect.options[4].text = t.categoryOther;
            
            // Update buttons
            document.getElementById('submit-btn').innerHTML = editingIndex === -1 ? t.submitBtnAdd : t.submitBtnUpdate;
            document.getElementById('clear-btn').innerHTML = t.clearBtn;
            
            // Update table headers
            document.getElementById('th-item-name').textContent = t.thItemName;
            document.getElementById('th-quantity').textContent = t.thQuantity;
            document.getElementById('th-unit').textContent = t.thUnit;
            document.getElementById('th-price').textContent = t.thPrice;
            document.getElementById('th-total').textContent = t.thTotal;
            document.getElementById('th-location').textContent = t.thLocation;
            document.getElementById('th-category').textContent = t.thCategory;
            document.getElementById('th-date').textContent = t.thDate;
            document.getElementById('th-actions').textContent = t.thActions;
            
            // Update placeholders
            document.getElementById('searchInput').placeholder = t.searchPlaceholder;
            
            // Refresh inventory display
            displayInventory();
        }

        function toggleLanguage() {
            const newLang = currentLanguage === 'ar' ? 'en' : 'ar';
            setLanguage(newLang);
        }

        // Initialize language on page load
        document.addEventListener('DOMContentLoaded', function() {
            setLanguage(currentLanguage);
            displayInventory();
        });

        // Form submission
        document.getElementById('inventoryForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const item = {
                name: document.getElementById('itemName').value,
                quantity: parseFloat(document.getElementById('quantity').value),
                unit: document.getElementById('unit').value,
                price: parseFloat(document.getElementById('price').value),
                location: document.getElementById('location').value,
                category: document.getElementById('category').value,
                date: new Date().toLocaleDateString('ar-EG')
            };

            const t = translations[currentLanguage];

            if (editingIndex === -1) {
                inventory.push(item);
                showToast(t.itemAdded);
            } else {
                inventory[editingIndex] = item;
                showToast(t.itemUpdated);
                editingIndex = -1;
                document.getElementById('submit-btn').innerHTML = t.submitBtnAdd;
            }

            saveToLocalStorage();
            displayInventory();
            clearForm();
        });

        function displayInventory() {
            const tbody = document.getElementById('inventoryBody');
            const t = translations[currentLanguage];
            
            if (inventory.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="9" class="empty-state">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20 7h-4V4c0-1.1-.9-2-2-2h-4c-1.1 0-2 .9-2 2v3H4c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2zM10 4h4v3h-4V4z"/>
                            </svg>
                            <h3>${currentLanguage === 'ar' ? 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£ØµÙ†Ø§Ù ÙÙŠ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†' : 'No items in inventory'}</h3>
                            <p>${currentLanguage === 'ar' ? 'Ø§Ø¨Ø¯Ø£ Ø¨Ø¥Ø¶Ø§ÙØ© Ø£ØµÙ†Ø§Ù Ø¬Ø¯ÙŠØ¯Ø©' : 'Start by adding new items'}</p>
                        </td>
                    </tr>
                `;
                return;
            }

            tbody.innerHTML = inventory.map((item, index) => {
                const total = (item.quantity * item.price).toFixed(2);
                return `
                    <tr>
                        <td>${item.name}</td>
                        <td>${item.quantity}</td>
                        <td>${translateUnit(item.unit)}</td>
                        <td>${item.price} ${t.currency}</td>
                        <td>${total} ${t.currency}</td>
                        <td>${item.location}</td>
                        <td>${translateCategory(item.category)}</td>
                        <td>${item.date}</td>
                        <td>
                            <div class="actions">
                                <button class="edit-btn" onclick="editItem(${index})">${t.editBtn}</button>
                                <button class="delete-btn" onclick="deleteItem(${index})">${t.deleteBtn}</button>
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        function translateUnit(unit) {
            const t = translations[currentLanguage];
            const unitMap = {
                'Ù‚Ø·Ø¹Ø©': t.unitPiece,
                'ÙƒØ±ØªÙˆÙ†': t.unitCarton,
                'ÙƒÙŠØ³': t.unitBag,
                'Ø¹Ù„Ø¨Ø©': t.unitBox,
                'ØµÙ†Ø¯ÙˆÙ‚': t.unitCrate,
                'Piece': t.unitPiece,
                'Carton': t.unitCarton,
                'Bag': t.unitBag,
                'Box': t.unitBox,
                'Crate': t.unitCrate
            };
            return unitMap[unit] || unit;
        }

        function translateCategory(category) {
            const t = translations[currentLanguage];
            const categoryMap = {
                'Ù…ÙˆØ§Ø¯ ØºØ°Ø§Ø¦ÙŠØ©': t.categoryFood,
                'Ù…ÙˆØ§Ø¯ ØªÙ†Ø¸ÙŠÙ': t.categoryCleaning,
                'Ø£Ø¯ÙˆØ§Øª Ù…ÙƒØªØ¨ÙŠØ©': t.categoryOffice,
                'Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª': t.categoryElectronics,
                'Ø£Ø®Ø±Ù‰': t.categoryOther,
                'Food Items': t.categoryFood,
                'Cleaning Supplies': t.categoryCleaning,
                'Office Supplies': t.categoryOffice,
                'Electronics': t.categoryElectronics,
                'Other': t.categoryOther
            };
            return categoryMap[category] || category;
        }

        function editItem(index) {
            const item = inventory[index];
            document.getElementById('itemName').value = item.name;
            document.getElementById('quantity').value = item.quantity;
            document.getElementById('unit').value = item.unit;
            document.getElementById('price').value = item.price;
            document.getElementById('location').value = item.location;
            document.getElementById('category').value = item.category;
            
            editingIndex = index;
            const t = translations[currentLanguage];
            document.getElementById('submit-btn').innerHTML = t.submitBtnUpdate;
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function deleteItem(index) {
            const t = translations[currentLanguage];
            if (confirm(t.confirmDelete)) {
                inventory.splice(index, 1);
                saveToLocalStorage();
                displayInventory();
                showToast(t.itemDeleted);
            }
        }

        function clearForm() {
            document.getElementById('inventoryForm').reset();
            editingIndex = -1;
            const t = translations[currentLanguage];
            document.getElementById('submit-btn').innerHTML = t.submitBtnAdd;
        }

        function filterInventory() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const rows = document.querySelectorAll('#inventoryBody tr');
            
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(searchTerm) ? '' : 'none';
            });
        }

        function saveToLocalStorage() {
            localStorage.setItem('inventory', JSON.stringify(inventory));
        }

        function saveData() {
            saveToLocalStorage();
            const t = translations[currentLanguage];
            showToast(t.dataSaved);
        }

        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }

        // Register Service Worker for PWA
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js')
                .then(reg => console.log('Service Worker registered'))
                .catch(err => console.log('Service Worker registration failed'));
        }
    </script>
</body>
</html>